@startuml
'/ updated after emotion-mode fix
actor User
participant MetaboGUI
participant MetaboCycle
participant GoalManager
participant MemoryManager
participant ReflectionEngine
participant YinYangOrchestrator
participant ModeDecider
participant GraphViewer
User -> GraphViewer: drag/zoom
User -> MetaboGUI: input text
MetaboGUI -> MetaboCycle: run_metabo_cycle(text) ##thread##
MetaboCycle -> GoalManager: get_goal()
MetaboCycle -> MemoryManager: snapshot()
MetaboCycle -> ReflectionEngine: generate_reflection()
MetaboCycle -> MemoryManager: add_triplets()
MetaboCycle -> MemoryManager: save_emotion()
MetaboCycle -> YinYangOrchestrator: decide_mode(metrics)
MetaboCycle -> ModeDecider: decide_yin_yang_mode(metrics)
ModeDecider --> MetaboCycle: mode
YinYangOrchestrator -> YinYangOrchestrator: debug_print()
MetaboCycle --> MetaboGUI: result
MetaboGUI -> GraphViewer: draw
@enduml
